(window.webpackJsonpTQPrism = window.webpackJsonpTQPrism || []).push([
  [7],
  {
    13: function (e, n, t) {
      'use strict';
      t.d(n, 'd', function () {
        return o;
      }),
        t.d(n, 'b', function () {
          return i;
        }),
        t.d(n, 'c', function () {
          return r;
        }),
        t.d(n, 'e', function () {
          return c;
        }),
        t.d(n, 'a', function () {
          return s;
        });
      var o = {
          addStyle: function () {
            var e = document.createElement('style');
            (e.innerHTML =
              "\n    .tq-h5-container-gis-view {\n        display: flex;\n        flex-direction: column;\n        min-height: 100vh;\n        width: 100%;\n        background-color: #f6f6f6;\n        overflow-Y: 'hidden';\n        overflow-x: 'hidden';\n        position: fixed;\n        top: 0px;\n        left: 0px;\n    }\n    .tq-h5-container-gis-view iframe {\n        height: 100%;\n        width: 100%;\n        position: fixed;\n        left: 0px;\n        top: 0px;\n        z-index: 9999;\n        overflow-Y: 'hidden';\n        overflow-x: 'hidden';\n    }\n    .tq-h5-container-gis-view-header{\n        display: flex;\n        flex-direction: row;\n        justify-content:space-between;\n        z-index: 10000;\n        padding: 10px;\n        background-color: #ffffff;\n        border-bottom: 1px solid #e9ecef;\n    }\n    .tq-h5-container-gis-view-title{\n        font-weight: bold;\n    }\n    .tq-h5-container-gis-view-close{\n        font-size: 1rem;\n        font-weight: 700;\n        line-height: 1;\n        color: #000;\n        text-shadow: 0 1px 0 #fff;\n        opacity: .5;\n    }\n"),
              document.getElementsByTagName('head')[0].appendChild(e);
          },
          handle: function (e) {
            var n = e.longitude,
              t = e.latitude,
              o = e.name,
              i = void 0 === o ? '信息点' : o;
            return new Promise(function (e, o) {
              var r = document.createElement('div');
              (r.innerHTML =
                '\n    <div class="tq-h5-container-gis-view">\n        <div class="tq-h5-container-gis-view-header">\n            <div class="tq-h5-container-gis-view-title">天阙地图</div>\n            <div class="tq-h5-container-gis-view-close">X</div>\n        </div>\n        <iframe id="tq-h5-container-gis-view-iframe" src=""></iframe>\n    </div>\n'),
                document.body.appendChild(r),
                document
                  .querySelector('.tq-h5-container-gis-view-close')
                  .addEventListener('click', function () {
                    r.remove();
                  });
              var c = 'https://m.amap.com/navi/?dest='
                .concat(n, ',')
                .concat(t, '&destName=')
                .concat(
                  i,
                  '&hideRouteIcon=1&key=1e04f956b4916ccc76323366545781f3',
                );
              document.querySelector(
                '#tq-h5-container-gis-view-iframe',
              ).src = c;
            });
          },
        },
        i = {
          addStyle: function () {},
          handle: function (e) {
            e.users;
            return new Promise(function (e, n) {});
          },
        },
        r = {
          handle: function (e) {
            var n = e.src;
            return new Promise(function (e, t) {
              var o = new Image();
              (o.crossOrigin = 'Anonymous'),
                (o.src = n),
                (o.onload = function () {
                  var n = document.createElement('canvas'),
                    t = n.getContext('2d');
                  (n.width = o.naturalWidth),
                    (n.height = o.naturalHeight),
                    t.drawImage(o, 0, 0, 300, 200),
                    e({
                      errMsg: 'getImageInfo:ok',
                      width: o.naturalWidth,
                      height: o.naturalHeight,
                      path: o,
                    });
                });
            });
          },
        },
        c = {
          handle: function (e) {
            var n = e.filePath;
            return new Promise(function (e, t) {
              var o = document.createElement('a');
              (o.href = n),
                (o.download = new Date().getTime() + '.jpeg'),
                document.body.appendChild(o),
                o.click(),
                document.body.removeChild(o),
                e();
            });
          },
        };
      function a(e) {
        return (
          (function (e) {
            if (Array.isArray(e)) {
              for (var n = 0, t = new Array(e.length); n < e.length; n++)
                t[n] = e[n];
              return t;
            }
          })(e) ||
          (function (e) {
            if (
              Symbol.iterator in Object(e) ||
              '[object Arguments]' === Object.prototype.toString.call(e)
            )
              return Array.from(e);
          })(e) ||
          (function () {
            throw new TypeError(
              'Invalid attempt to spread non-iterable instance',
            );
          })()
        );
      }
      var s = function (e) {
        var n,
          t = e.multiple,
          o = void 0 === t || t,
          i = e.accept,
          r = void 0 === i ? '*/*' : i,
          c = e.fileId,
          s = void 0 === c ? 'fileId' : c,
          u = e.success,
          l =
            (e.fail,
            { errMsg: 'chooseFile:ok', tempFilePaths: [], tempFiles: [] }),
          f = document.getElementById(s);
        if (!f) {
          var d = document.createElement('input');
          d.setAttribute('type', 'file'),
            d.setAttribute('id', s),
            !0 === o && d.setAttribute('multiple', 'multiple'),
            d.setAttribute('accept', r),
            d.setAttribute(
              'style',
              'position: fixed; top: -4000px; left: -3000px; z-index: -300;',
            ),
            document.body.appendChild(d),
            (f = document.getElementById(s));
        }
        var p = new Promise(function (e) {
            n = e;
          }),
          h = document.createEvent('MouseEvents');
        return (
          h.initEvent('click', !0, !0),
          f.dispatchEvent(h),
          (f.onchange = function (e) {
            var t = a(e.target.files);
            t &&
              t.forEach(function (o) {
                var i = new Blob([o], { type: o.type }),
                  r = URL.createObjectURL(i);
                l.tempFilePaths.push(r),
                  l.tempFiles.push({
                    path: r,
                    size: o.size,
                    type: o.type,
                    name: o.name,
                  }),
                  l.tempFiles.length === t.length &&
                    ('function' == typeof u && u(l),
                    n(l),
                    (e.target.value = ''));
              });
          }),
          p
        );
      };
    },
    14: function (e, n, t) {
      'use strict';
      function o(e) {
        return (o =
          'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
            ? function (e) {
                return typeof e;
              }
            : function (e) {
                return e &&
                  'function' == typeof Symbol &&
                  e.constructor === Symbol &&
                  e !== Symbol.prototype
                  ? 'symbol'
                  : typeof e;
              })(e);
      }
      t.d(n, 'a', function () {
        return l;
      });
      var i = function (e) {
          var n = e.apiUrl,
            t = e.appKey,
            i = function (e, n, t) {
              return function () {
                var o = e.response;
                200 === e.status ? (0 == o.code ? n(o.data) : t(o.msg)) : t(o);
              };
            };
          this.api = {
            get: function (e, r) {
              return new Promise(function (c, a) {
                var s,
                  u = new XMLHttpRequest(),
                  l = ''
                    .concat(n, '/')
                    .concat(e, '?appKey=')
                    .concat(t, '&')
                    .concat(
                      (s = r)
                        ? Object.keys(s)
                            .map(function (e) {
                              return ''
                                .concat(encodeURIComponent(e), '=')
                                .concat(
                                  'object' === o(s[e])
                                    ? encodeURIComponent(JSON.stringify(s[e]))
                                    : encodeURIComponent(s[e]),
                                );
                            })
                            .join('&')
                        : '',
                    );
                u.open('GET', l),
                  (u.responseType = 'json'),
                  (u.onload = i(u, c, a)),
                  (u.onerror = a),
                  u.send();
              });
            },
            post: function (e, o) {
              return new Promise(function (r, c) {
                var a = new XMLHttpRequest(),
                  s = ''.concat(n, '/').concat(e, '?appKey=').concat(t);
                a.open('POST', s),
                  a.setRequestHeader('content-type', 'application/json'),
                  (a.responseType = 'json'),
                  (a.onload = i(a, r, c)),
                  (a.onerror = c),
                  a.send(JSON.stringify(o));
              });
            },
          };
        },
        r = t(0),
        c = t.n(r),
        a = t(2),
        s = t(13),
        u = t(18);
      var l = function e(n) {
        var t = this;
        !(function (e, n) {
          if (!(e instanceof n))
            throw new TypeError('Cannot call a class as a function');
        })(this, e),
          Object.assign(this, u),
          [c.a, i].forEach(function (e) {
            return e.call(t, n);
          }),
          (this.url2base64 = function () {
            var e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : {},
              n = e.success,
              t = e.fail,
              o = e.url;
            return Object(a.wrapFn)(n, t, function (e, n) {
              fetch(o)
                .then(function (e) {
                  return e.blob();
                })
                .then(function (n) {
                  var t = new FileReader();
                  (t.onload = function (n) {
                    e(n.target.result.split(',')[1]);
                  }),
                    t.readAsDataURL(n);
                })
                .catch(n);
            });
          }),
          (this.createCanvasContext = function (e, n) {
            var t = document
              .querySelector('canvas[canvasid="'.concat(e, '"]'))
              .getContext('2d');
            return (
              (t.setTextBaseline = function (e) {
                t.textBaseline = e;
              }),
              (t.setTextAlign = function (e) {
                t.textAlign = e;
              }),
              (t.setFillStyle = function (e) {
                t.fillStyle = e;
              }),
              (t.setFontSize = function (e) {
                t.font = ''.concat(e, 'px serif');
              }),
              t
            );
          }),
          (this.chooseFile = function (e) {
            var n = e.multiple,
              t = void 0 === n || n,
              o = e.fileId,
              i = void 0 === o ? 'fileId' : o,
              r = e.accept,
              c = void 0 === r ? '*/*' : r,
              u = e.success,
              l = e.fail;
            return Object(a.wrapFn)(u, l, function (e, n) {
              Object(s.a)({
                multiple: t,
                accept: c,
                fileId: i,
                success: e,
                fail: n,
              });
            });
          }),
          (this.getImageInfo = function () {
            var e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : {},
              n = e.src,
              t = e.success,
              o = e.fail;
            return Object(a.wrapFn)(t, o, function (e, t) {
              s.c.handle({ src: n }).then(e).catch(t);
            });
          }),
          (this.saveImageToPhotosAlbum = function () {
            var e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : {},
              n = e.filePath,
              t = e.success,
              o = e.fail;
            return Object(a.wrapFn)(t, o, function (e, t) {
              s.e.handle({ filePath: n }).then(e).catch(t);
            });
          });
      };
    },
    15: function (e, n, t) {
      'use strict';
      t.d(n, 'b', function () {
        return u;
      }),
        t.d(n, 'a', function () {
          return l;
        });
      var o = 3.141592653589793,
        i = 6378245,
        r = 0.006693421622965943;
      function c(e, n) {
        return e < 72.004 || e > 137.8347 || n < 0.8293 || n > 55.8271 || !1;
      }
      function a(e, n) {
        var t =
          2 * e -
          100 +
          3 * n +
          0.2 * n * n +
          0.1 * e * n +
          0.2 * Math.sqrt(Math.abs(e));
        return (
          (t +=
            (2 * (20 * Math.sin(6 * e * o) + 20 * Math.sin(2 * e * o))) / 3),
          (t += (2 * (20 * Math.sin(n * o) + 40 * Math.sin((n / 3) * o))) / 3),
          (t +=
            (2 *
              (160 * Math.sin((n / 12) * o) + 320 * Math.sin((n * o) / 30))) /
            3)
        );
      }
      function s(e, n) {
        var t =
          300 +
          e +
          2 * n +
          0.1 * e * e +
          0.1 * e * n +
          0.1 * Math.sqrt(Math.abs(e));
        return (
          (t +=
            (2 * (20 * Math.sin(6 * e * o) + 20 * Math.sin(2 * e * o))) / 3),
          (t += (2 * (20 * Math.sin(e * o) + 40 * Math.sin((e / 3) * o))) / 3),
          (t +=
            (2 *
              (150 * Math.sin((e / 12) * o) + 300 * Math.sin((e / 30) * o))) /
            3)
        );
      }
      function u(e, n) {
        if (c(e, n)) return [e, n];
        var t = s(e - 105, n - 35),
          u = a(e - 105, n - 35),
          l = (n / 180) * o,
          f = Math.sin(l);
        f = 1 - r * f * f;
        var d = Math.sqrt(f);
        return [
          e + (t = (180 * t) / ((i / d) * Math.cos(l) * o)),
          n + (u = (180 * u) / (((i * (1 - r)) / (f * d)) * o)),
        ];
      }
      function l(e, n) {
        if (c(e, n)) return [e, n];
        var t = a(e - 105, n - 35),
          u = s(e - 105, n - 35),
          l = (n / 180) * o,
          f = Math.sin(l);
        f = 1 - r * f * f;
        var d = Math.sqrt(f);
        return (
          (t = (180 * t) / (((i * (1 - r)) / (f * d)) * o)),
          [
            2 * e - (e + (u = (180 * u) / ((i / d) * Math.cos(l) * o))),
            2 * n - (n + t),
          ]
        );
      }
    },
    23: function (e, n, t) {
      'use strict';
      t.d(n, 'a', function () {
        return o;
      });
      var o = {
        markerAuthed: function () {
          window.sessionStorage.setItem('prism_authed', '1');
        },
        isAuthed: function () {
          return '1' === window.sessionStorage.getItem('prism_authed');
        },
      };
    },
    7: function (e, n, t) {
      'use strict';
      t.r(n),
        t.d(n, 'default', function () {
          return j;
        });
      var o = t(14),
        i = t(2),
        r = t(4),
        c = t.n(r),
        a = t(23),
        s = function (e) {
          var n =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : 'image/jpeg',
            t =
              arguments.length > 2 && void 0 !== arguments[2]
                ? arguments[2]
                : 0.5,
            o = '';
          try {
            o = e.toDataURL(n, t);
          } catch (e) {
            console.log(e);
          }
          return o;
        },
        u = function (e, n) {
          var t = document.createElement('canvas'),
            o = t.getContext('2d'),
            i = new Image();
          (i.crossOrigin = 'Anonymous'),
            (i.onload = function () {
              console.log('img.onload'),
                (t.width = i.width),
                (t.height = i.height),
                o.drawImage(i, 0, 0),
                n(t);
            }),
            (i.onerror = function () {
              console.log('img.onerror');
            }),
            (i.src = e);
        },
        l = function (e) {
          for (
            var n = e.split(','),
              t = n[0].match(/:(.*?);/)[1],
              o = atob(n[1]),
              i = o.length,
              r = new Uint8Array(i);
            i--;

          )
            r[i] = o.charCodeAt(i);
          return new Blob([r], { type: t });
        },
        f = function (e, n) {
          u(e, function (e) {
            n(l(s(e)));
          });
        },
        d = function (e, n) {
          p(e, function (e) {
            var t = URL.createObjectURL(e);
            n(t);
          });
        },
        p = function (e, n) {
          var t = new XMLHttpRequest();
          t.open('GET', e, !0),
            (t.responseType = 'blob'),
            (t.onload = function (e) {
              200 === this.status && n(this.response);
            }),
            t.send();
        },
        h = t(15);
      function g(e) {
        return (g =
          'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
            ? function (e) {
                return typeof e;
              }
            : function (e) {
                return e &&
                  'function' == typeof Symbol &&
                  e.constructor === Symbol &&
                  e !== Symbol.prototype
                  ? 'symbol'
                  : typeof e;
              })(e);
      }
      function m(e, n) {
        return (
          (function (e) {
            if (Array.isArray(e)) return e;
          })(e) ||
          (function (e, n) {
            if (
              !(
                Symbol.iterator in Object(e) ||
                '[object Arguments]' === Object.prototype.toString.call(e)
              )
            )
              return;
            var t = [],
              o = !0,
              i = !1,
              r = void 0;
            try {
              for (
                var c, a = e[Symbol.iterator]();
                !(o = (c = a.next()).done) &&
                (t.push(c.value), !n || t.length !== n);
                o = !0
              );
            } catch (e) {
              (i = !0), (r = e);
            } finally {
              try {
                o || null == a.return || a.return();
              } finally {
                if (i) throw r;
              }
            }
            return t;
          })(e, n) ||
          (function () {
            throw new TypeError(
              'Invalid attempt to destructure non-iterable instance',
            );
          })()
        );
      }
      function v(e, n) {
        var t = Object.keys(e);
        if (Object.getOwnPropertySymbols) {
          var o = Object.getOwnPropertySymbols(e);
          n &&
            (o = o.filter(function (n) {
              return Object.getOwnPropertyDescriptor(e, n).enumerable;
            })),
            t.push.apply(t, o);
        }
        return t;
      }
      function w(e) {
        for (var n = 1; n < arguments.length; n++) {
          var t = null != arguments[n] ? arguments[n] : {};
          n % 2
            ? v(Object(t), !0).forEach(function (n) {
                b(e, n, t[n]);
              })
            : Object.getOwnPropertyDescriptors
            ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t))
            : v(Object(t)).forEach(function (n) {
                Object.defineProperty(
                  e,
                  n,
                  Object.getOwnPropertyDescriptor(t, n),
                );
              });
        }
        return e;
      }
      function b(e, n, t) {
        return (
          n in e
            ? Object.defineProperty(e, n, {
                value: t,
                enumerable: !0,
                configurable: !0,
                writable: !0,
              })
            : (e[n] = t),
          e
        );
      }
      function y(e) {
        return (y = Object.setPrototypeOf
          ? Object.getPrototypeOf
          : function (e) {
              return e.__proto__ || Object.getPrototypeOf(e);
            })(e);
      }
      function I(e) {
        if (void 0 === e)
          throw new ReferenceError(
            "this hasn't been initialised - super() hasn't been called",
          );
        return e;
      }
      function O(e, n) {
        return (O =
          Object.setPrototypeOf ||
          function (e, n) {
            return (e.__proto__ = n), e;
          })(e, n);
      }
      var j = (function (e) {
        function n(e) {
          var t, o, r;
          !(function (e, n) {
            if (!(e instanceof n))
              throw new TypeError('Cannot call a class as a function');
          })(this, n),
            (o = this),
            (t =
              !(r = y(n).call(this, e)) ||
              ('object' !== g(r) && 'function' != typeof r)
                ? I(o)
                : r);
          var s = I(t),
            u = [
              'onMenuShareAppMessage',
              'onMenuShareWechat',
              'startRecord',
              'stopRecord',
              'onVoiceRecordEnd',
              'playVoice',
              'pauseVoice',
              'stopVoice',
              'onVoicePlayEnd',
              'uploadVoice',
              'downloadVoice',
              'translateVoice',
              'chooseImage',
              'previewImage',
              'uploadImage',
              'downloadImage',
              'previewFile',
              'getNetworkType',
              'openLocation',
              'getLocation',
              'startAutoLBS',
              'stopAutoLBS',
              'onLocationChange',
              'hideOptionMenu',
              'showOptionMenu',
              'hideMenuItems',
              'showMenuItems',
              'hideAllNonBaseMenuItem',
              'showAllNonBaseMenuItem',
              'closeWindow',
              'scanQRCode',
              'chooseVideo',
              'uploadVideo',
              'downloadVideo',
              'agentConfig',
              'getStepCount',
              'getAllPhoneContacts',
              'addCalendarEvent',
              'showWatermark',
              'launch3rdApp',
              'getInstallState',
              'openUserProfile',
              'selectExternalContact',
              'selectEnterpriseContact',
              'bioassayAuthentication',
              'openUrl',
              'openEnterpriseApp',
              'request3rdApp',
            ],
            l = [
              'getStepCount',
              'addCalendarEvent',
              'openUserProfile',
              'getAllPhoneContacts',
              'selectExternalContact',
              'selectEnterpriseContact',
              'openEnterpriseChat',
            ],
            p = function () {
              return new Promise(function (e, n) {
                var t = window.location.href.split('#')[0];
                s.api
                  .get('web/appcloud/api/third/platform/wechatZW/getConfig', {
                    url: t,
                    agent: 'agent_config',
                  })
                  .then(function (t) {
                    c.a.invoke(
                      'agentConfig',
                      {
                        agentid: t.agentId.toString(),
                        corpid: t.corpId,
                        timestamp: t.timestamp,
                        nonceStr: t.nonceStr,
                        signature: t.signature,
                        jsApiList: l,
                      },
                      function (t) {
                        'agentConfig:ok' == t.err_msg ? e(t) : n(t);
                      },
                    );
                  })
                  .catch(n);
              });
            },
            v = function (n) {
              s.api
                .post('web/appcloud/api/third/platform/wechatZW/login', {
                  code: n,
                })
                .then(function (n) {
                  var t, o;
                  (s._config = Object.assign({}, s._config, {
                    appId: n.corpId,
                    userId: n.openid,
                    authCode: n.authCode,
                  })),
                    (t = window.location.href.split('#')[0]),
                    (o = function (e) {
                      return s._emit('error', e);
                    }),
                    s.api
                      .get(
                        'web/appcloud/api/third/platform/wechatZW/getConfig',
                        { url: t },
                      )
                      .then(function (n) {
                        s._config = Object.assign({}, s._config, {
                          appId: n.corpId,
                          agentId: n.agentId,
                          envType: 'wechatZW',
                        });
                        var t = Object.assign({}, n, {
                          beta: !0,
                          debug: e.debug,
                          appId: n.corpId,
                          jsApiList: u,
                        });
                        c.a.config(t),
                          c.a.ready(function (e) {
                            a.a.markerAuthed(),
                              p()
                                .then(function (e) {
                                  s._emit('ready', s._config);
                                })
                                .catch(o);
                          }),
                          c.a.error(o);
                      })
                      .catch(o);
                })
                .catch(function (e) {
                  return s._emit('error', e);
                });
            },
            b = function () {
              var e,
                n,
                t,
                o =
                  ((e = new RegExp('[?|&]' + 'code' + '=([^&]+)')),
                  (n = location.search.match(e)) && n[1]);
              o
                ? v(o)
                : ((t = window.location.href.replace(window.location.hash, '')),
                  s.api
                    .get('web/appcloud/api/third/platform/wechatZW/getConfig', {
                      url: t,
                    })
                    .then(function (e) {
                      var n = [];
                      n.push('appid=' + e.corpId),
                        n.push('redirect_uri=' + encodeURIComponent(t)),
                        n.push('response_type=code'),
                        n.push('scope=snsapi_base&state=STATE#wechat_redirect'),
                        (window.location.href =
                          'https://open.weixin.qq.com/connect/oauth2/authorize?' +
                          n.join('&'));
                    })
                    .catch(function (e) {
                      return s._emit('error', e);
                    }));
            };
          return (
            window.addEventListener('pageshow', function () {
              a.a.isAuthed()
                ? setTimeout(function () {
                    c.a.closeWindow();
                  }, 100)
                : s._config.getConfigFn
                ? s._config
                    .getConfigFn()
                    .then(function (e) {
                      var n = Object.assign({}, e, { jsApiList: u });
                      c.a.config(n),
                        c.a.ready(function (e) {
                          return s._emit('ready', s._config);
                        }),
                        c.a.error(function (e) {
                          return s._emit('error', e);
                        });
                    })
                    .catch(function (e) {
                      return s._emit('error', e);
                    })
                : b();
            }),
            (s.closeWindow = function () {
              c.a.closeWindow();
            }),
            (s.chooseImage = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.sourceType,
                t = e.sizeType,
                o = e.count,
                r = e.success,
                a = e.fail;
              return Object(i.wrapFn)(r, a, function (e, i) {
                c.a.chooseImage({
                  count: o,
                  sourceType: n,
                  sizeType: t,
                  success: function (n) {
                    var t = n.localIds;
                    Promise.all(
                      t.map(function (e) {
                        return new Promise(function (n, t) {
                          c.a.uploadImage({
                            localId: e,
                            isShowProgressTips: 1,
                            success: function (t) {
                              var o = t.serverId,
                                i = s._config,
                                r = i.appKey,
                                c = i.apiUrl,
                                a = ''
                                  .concat(
                                    c,
                                    '/web/appcloud/api/third/platform/media/wechatZW/getMedia?appKey=',
                                  )
                                  .concat(r, '&mediaId=')
                                  .concat(o);
                              f(a, function (t) {
                                var o = URL.createObjectURL(t);
                                n({ localId: e, blobUrl: o, size: t.size });
                              });
                            },
                          });
                        });
                      }),
                    ).then(function (n) {
                      var t = {
                        errMsg: 'chooseImage:ok',
                        tempFilePaths: n.map(function (e) {
                          return e.blobUrl;
                        }),
                        tempFiles: n
                          .map(function (e) {
                            var n = e.localId,
                              t = e.blobUrl,
                              o = e.size;
                            return w(
                              {},
                              (function (e) {
                                var n = { name: '', type: 'image/jpeg' };
                                n.name = e.split('/').pop() || '';
                                var t = n.name.split('.');
                                return (
                                  1 == t.length && (n.name = n.name + '.jpg'),
                                  2 == t.length &&
                                    'jpg' != t[1] &&
                                    (n.type = 'image/'.concat(t[1])),
                                  n
                                );
                              })(n),
                              { blobUrl: t, size: o },
                            );
                          })
                          .map(function (e) {
                            var n = e.name,
                              t = e.type;
                            return {
                              name: n,
                              path: e.blobUrl,
                              size: e.size,
                              type: t,
                            };
                          }),
                      };
                      e(t);
                    });
                  },
                  fail: i,
                });
              });
            }),
            (s.startRecord = function () {
              c.a.startRecord();
            }),
            (s.stopRecord = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.success,
                t = e.fail;
              return Object(i.wrapFn)(n, t, function (e, n) {
                c.a.stopRecord({
                  success: function (n) {
                    var t = n.localId;
                    new Promise(function (e, n) {
                      c.a.uploadVoice({
                        localId: t,
                        isShowProgressTips: 1,
                        success: function (n) {
                          var o = n.serverId,
                            i = s._config,
                            r = i.appKey,
                            c = i.apiUrl,
                            a = ''
                              .concat(
                                c,
                                '/web/appcloud/api/third/platform/media/wechatZW/getVoice?appKey=',
                              )
                              .concat(r, '&mediaId=')
                              .concat(o);
                          d(a, function (o) {
                            e({ localId: t, blobUrl: o, _wx: n });
                          });
                        },
                      });
                    }).then(function (n) {
                      e({
                        localId: n.localId,
                        tempFilePath: n.blobUrl,
                        _wx: n,
                      });
                    });
                  },
                  fail: n,
                });
              });
            }),
            (s.onVoiceRecordEnd = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.success,
                t = e.fail;
              return Object(i.wrapFn)(n, t, function (e, n) {
                c.a.onVoiceRecordEnd({
                  complete: function (n) {
                    var t = n.localId;
                    new Promise(function (e, n) {
                      c.a.uploadVoice({
                        localId: t,
                        isShowProgressTips: 1,
                        success: function (n) {
                          var o = n.serverId,
                            i = s._config,
                            r = i.appKey,
                            c = i.apiUrl,
                            a = ''
                              .concat(
                                c,
                                '/web/appcloud/api/third/platform/media/wechatZW/getMedia?appKey=',
                              )
                              .concat(r, '&mediaId=')
                              .concat(o);
                          d(a, function (o) {
                            e({ localId: t, blobUrl: o, _wx: n });
                          });
                        },
                      });
                    }).then(function (n) {
                      e({
                        localId: n.localId,
                        tempFilePath: n.blobUrl,
                        _wx: n,
                      });
                    });
                  },
                });
              });
            }),
            (s.playVoice = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.localId,
                t = e.success,
                o = e.fail;
              return Object(i.wrapFn)(t, o, function (e, t) {
                c.a.playVoice({ localId: n });
              });
            }),
            (s.pauseVoice = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.localId,
                t = e.success,
                o = e.fail;
              return Object(i.wrapFn)(t, o, function (e, t) {
                c.a.pauseVoice({ localId: n });
              });
            }),
            (s.stopVoice = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.localId,
                t = e.success,
                o = e.fail;
              return Object(i.wrapFn)(t, o, function (e, t) {
                c.a.stopVoice({ localId: n });
              });
            }),
            (s.uploadVoice = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.localId,
                t = e.success,
                o = e.fail;
              return Object(i.wrapFn)(t, o, function (e, t) {
                c.a.uploadVoice({
                  localId: n,
                  isShowProgressTips: 1,
                  success: function (n) {
                    e(n);
                  },
                  fail: t,
                });
              });
            }),
            (s.downloadVoice = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.serverId,
                t = e.success,
                o = e.fail;
              return Object(i.wrapFn)(t, o, function (e, t) {
                c.a.downloadVoice({
                  serverId: n,
                  isShowProgressTips: 1,
                  success: function (n) {
                    e(n);
                  },
                  fail: t,
                });
              });
            }),
            (s.onVoicePlayEnd = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.success,
                t = e.fail;
              return Object(i.wrapFn)(n, t, function (e, n) {
                c.a.onVoicePlayEnd({
                  success: function (n) {
                    e({ localId: n.localId });
                  },
                });
              });
            }),
            (s.getLocation = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.success,
                t = e.fail;
              return Object(i.wrapFn)(n, t, function (e, n) {
                c.a.getLocation({
                  type: 'wgs84',
                  success: function (n) {
                    e({ longitude: n.longitude, latitude: n.latitude });
                  },
                  fail: n,
                });
              });
            }),
            (s.startUpdateLocation = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.type,
                t = e.success,
                o = e.fail;
              return Object(i.wrapFn)(t, o, function (e, t) {
                c.a.invoke(
                  'startAutoLBS',
                  { type: n || 'wgs84', continue: 1 },
                  function (n) {
                    'startAutoLBS:ok' == n.err_msg ? e(n) : t(n);
                  },
                );
              });
            }),
            (s.stopUpdateLocation = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.success,
                t = e.fail;
              return Object(i.wrapFn)(n, t, function (e, n) {
                c.a.invoke('stopAutoLBS', {}, function (t) {
                  'stopAutoLBS:ok' == t.err_msg ? e(t) : n(t);
                });
              });
            }),
            (s.onLocationChange = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.success,
                t = e.fail;
              return Object(i.wrapFn)(n, t, function (e, n) {
                (s.onLocationChange = function (t) {
                  if ('auto:location:report:ok' == t.errMsg) {
                    var o = t.accuracy,
                      i = t.latitude,
                      r = t.longitude,
                      c = t.speed;
                    e({
                      accuracy: o,
                      latitude: i,
                      longitude: r,
                      speed: c,
                      _zwx: t,
                    });
                  } else n(t);
                }),
                  c.a.onLocationChange(s.onLocationChange);
              });
            }),
            (s.offLocationChange = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.success,
                t = e.fail;
              return Object(i.wrapFn)(n, t, function (e, n) {
                (s.onLocationChange = function () {}), c.a.onLocationChange();
              });
            }),
            (s.openLocation = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.latitude,
                t = e.longitude,
                o = e.success,
                r = e.fail;
              return Object(i.wrapFn)(o, r, function (e, o) {
                var i = m(Object(h.b)(t, n), 2),
                  r = i[0],
                  a = i[1];
                c.a.openLocation({
                  latitude: r,
                  longitude: a,
                  name: '',
                  address: '',
                  scale: 1,
                  infoUrl: '',
                  success: e,
                });
              });
            }),
            (s.getNetworkType = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.success,
                t = e.fail;
              return Object(i.wrapFn)(n, t, function (e, n) {
                c.a.getNetworkType({
                  success: function (n) {
                    e(n);
                  },
                });
              });
            }),
            (s.scanCode = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.success,
                t = e.fail;
              return Object(i.wrapFn)(n, t, function (e, n) {
                c.a.scanQRCode({
                  needResult: 1,
                  success: function (n) {
                    e({ text: n.resultStr, _wx: n });
                  },
                  fail: n,
                });
              });
            }),
            (s.contactPicker = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.success,
                t = e.fail;
              return Object(i.wrapFn)(n, t, function (e, n) {
                c.a.invoke(
                  'selectEnterpriseContact',
                  { fromDepartmentId: -1, mode: 'multi', type: ['user'] },
                  function (t) {
                    if (
                      (console.log(t),
                      'selectEnterpriseContact:ok' == t.err_msg)
                    ) {
                      var o = t.result.userList.map(function (e) {
                        return {
                          userId: e.id,
                          userName: e.name,
                          headImgUrl: e.avatar,
                        };
                      });
                      e({ users: o, departments: [] });
                    } else n(t.err_msg);
                  },
                );
              });
            }),
            (s.share = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.title,
                t = e.desc,
                o = e.link,
                r = e.imgUrl,
                a = e.success,
                s = e.fail;
              return Object(i.wrapFn)(a, s, function (e, i) {
                c.a.invoke(
                  'shareAppMessage',
                  { title: n, desc: t, link: o, imgUrl: r },
                  function (n) {
                    'shareAppMessage:ok' == n.err_msg ? e(n) : i(n);
                  },
                );
              });
            }),
            (s.send = function () {
              var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n = e.message,
                t = e.success,
                o = e.fail;
              return Object(i.wrapFn)(t, o, function (e, t) {
                var o = Object.assign({}, n, { agentid: s._config.agentId });
                s.api
                  .post(
                    'web/appcloud/api/third/platform/message/wechatZW/send',
                    o,
                  )
                  .then(e)
                  .catch(t);
              });
            }),
            (s._zwx = {
              invoke: function (e, n, t) {
                c.a.invoke(e, n, t);
              },
              previewFile: function (e) {
                var n = e.url,
                  t = e.name,
                  o = e.size;
                c.a.previewFile({ url: n, name: t, size: o });
              },
              closeWindow: function () {
                c.a.closeWindow();
              },
              hideOptionMenu: function () {
                c.a.hideOptionMenu();
              },
              startRecord: function () {
                c.a.startRecord();
              },
              stopRecord: function (e) {
                var n = e.success;
                c.a.stopRecord({ success: n });
              },
              translateVoice: function (e) {
                var n = e.localId,
                  t = e.isShowProgressTips,
                  o = void 0 === t ? 1 : t,
                  i = e.success;
                c.a.translateVoice({
                  localId: n,
                  isShowProgressTips: o,
                  success: i,
                });
              },
            }),
            t
          );
        }
        return (
          (function (e, n) {
            if ('function' != typeof n && null !== n)
              throw new TypeError(
                'Super expression must either be null or a function',
              );
            (e.prototype = Object.create(n && n.prototype, {
              constructor: { value: e, writable: !0, configurable: !0 },
            })),
              n && O(e, n);
          })(n, e),
          n
        );
      })(o.a);
    },
  },
]);
